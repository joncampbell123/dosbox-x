<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Installing Microsoft Windows 3.0 in DOSBox-X</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>Back to the <a href="Guide%3AMicrosoft-Windows-in-DOSBox‐X">Microsoft Windows in DOSBox-X</a></p>
</div>
<div class="sect1">
<h2 id="_installing_microsoft_windows_3_0_in_dosbox_x">Installing Microsoft Windows 3.0 in DOSBox-X</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.0_SPLASH.png" alt="Windows 3.0 splash screen">
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_installing_microsoft_windows_3_0_in_dosbox_x">Installing Microsoft Windows 3.0 in DOSBox-X</a></li>
<li><a href="#_overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#_editions_this_applies_to">Editions this applies to</a></li>
<li><a href="#_readme_1st">README.1ST</a></li>
<li><a href="#_useful_links">Useful links</a></li>
<li><a href="#_general_notes">General Notes</a></li>
<li><a href="#_windows_3_0a_with_multimedia_extensions_specific_notes">Windows 3.0a with Multimedia Extensions specific notes</a></li>
</ul>
</li>
<li><a href="#_dosbox_x_config_file">DOSBox-X config file</a></li>
<li><a href="#_preparing_for_installation">Preparing for installation</a>
<ul class="sectlevel2">
<li><a href="#_example_of_extracting_files_from_disk_images">Example of extracting files from disk images</a></li>
<li><a href="#_mounting_an_installation_cd_rom">Mounting an installation CD-ROM</a></li>
</ul>
</li>
<li><a href="#_installing_in_a_mounted_folder">Installing in a mounted folder</a></li>
<li><a href="#_booting_from_a_dos_hdd_image">Booting from a DOS HDD image</a>
<ul class="sectlevel2">
<li><a href="#_host_folder_mounts">Host Folder mounts</a></li>
<li><a href="#_installing_windows_3_0_into_a_dos_hdd_image">Installing Windows 3.0 into a DOS HDD image</a></li>
</ul>
</li>
<li><a href="#_starting_windows_3_0_after_installation">Starting Windows 3.0 after installation</a></li>
<li><a href="#_steps_to_take_after_installation">Steps to take after installation</a></li>
<li><a href="#_video_driver">Video driver</a></li>
<li><a href="#_mouse_support">Mouse support</a></li>
<li><a href="#_dosbox_x_mouse_integration_driver">DOSBox-X mouse integration driver</a>
<ul class="sectlevel2">
<li><a href="#_vmware_mouse_driver">VMWare mouse driver</a></li>
</ul>
</li>
<li><a href="#_sound">Sound</a></li>
<li><a href="#_multimedia_edition_sound">Multimedia Edition Sound</a>
<ul class="sectlevel2">
<li><a href="#_enabling_external_midi_in_windows_3_0_multimedia_edition">Enabling external MIDI in Windows 3.0 Multimedia Edition</a></li>
</ul>
</li>
<li><a href="#_enabling_printing">Enabling printing</a>
<ul class="sectlevel2">
<li><a href="#_print_to_postscript">Print to PostScript</a></li>
<li><a href="#_epson_emulation">Epson emulation</a></li>
</ul>
</li>
<li><a href="#_starting_a_windows_game_from_dos">Starting a Windows game from DOS</a></li>
<li><a href="#_known_limitations">Known limitations</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide will give a general description of installing Windows 3.0 in DOSBox-X, in addition to addressing some common issues.</p>
</div>
<div class="sect2">
<h3 id="_editions_this_applies_to">Editions this applies to</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Windows 3.0</strong> (released May 22, 1990)</p>
<div class="ulist">
<ul>
<li>
<p>Supports up to 16MB RAM.</p>
</li>
<li>
<p>Improved UI.</p>
</li>
<li>
<p>Improved memory management (286+ only).</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows 3.0a</strong> (released Dec, 1990)</p>
<div class="ulist">
<ul>
<li>
<p>Allow programs to call into real-mode when started in standard mode.</p>
</li>
<li>
<p>Bug fixes for the installer to alleviate crashes.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Windows 3.0a with Multimedia Extensions</strong> (released Oct, 1991)</p>
<div class="ulist">
<ul>
<li>
<p>Adds Multimedia Extensions 1.0.</p>
</li>
<li>
<p>Multimedia extensions do not support real mode (8086/8088 CPUs).</p>
</li>
<li>
<p>Adds support for recording and playing digital audio files.</p>
</li>
<li>
<p>Adds support for MIDI devices.</p>
</li>
<li>
<p>Adds support for screensavers.</p>
</li>
<li>
<p>Adds support for analogue joysticks.</p>
</li>
<li>
<p>Adds support for audio CD-ROMs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Edition</th>
<th class="tableblock halign-left valign-top">Min CPU</th>
<th class="tableblock halign-left valign-top">Min RAM</th>
<th class="tableblock halign-left valign-top">Max RAM</th>
<th class="tableblock halign-left valign-top">Min HDD space</th>
<th class="tableblock halign-left valign-top">Min DOS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8086</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0a Multimedia Edition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">286</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Windows 3.0 was available in both Retail and OEM editions, except for <strong>Windows 3.0a with Multimedia Extensions</strong> which was available only through OEMs.</p>
</div>
<div class="paragraph">
<p>OEM editions may include and default to different drivers in SETUP for things like video and sound.</p>
</div>
</div>
<div class="sect2">
<h3 id="_readme_1st">README.1ST</h3>
<div class="paragraph">
<p>There are already some guides to installing Windows 3.0 in DOSBox, and those guides will also work with DOSBox-X.
Some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.sierrahelp.com/Utilities/Emulators/DOSBox/3x_install.html">Windows 3x on DOSBox guide</a> on sierrahelp.com</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This guide does not look to replicate those guides.
Instead, this guide will have some install guidance and hints and tips not covered on those pages, or that are specific to DOSBox-X. It is not intended to be a comprehensive guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_useful_links">Useful links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/">VOGONS Vintage Driver Library</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Windows_3.0">Wikipedia: Windows 3.0</a></p>
</li>
<li>
<p><a href="https://betawiki.net/wiki/Windows_3.0">BetaWiki: Windows 3.0</a></p>
</li>
<li>
<p><a href="https://betawiki.net/wiki/Windows_3.00a_Multimedia_Edition">BetaWiki: Windows 3.00a Multimedia Edition</a></p>
</li>
<li>
<p><a href="https://nerdlypleasures.blogspot.com/2016/12/windows-30-multimedia-edition-early.html">Nerdly Pleasures: Windows 3.0 Multimedia Edition - Early Windows Multimedia Gaming</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_general_notes">General Notes</h3>
<div class="ulist">
<ul>
<li>
<p>Some parts of the installation can take a considerable amount of time.
You may be able to speed this up considerably (depending on the host CPU) by using the DOSBox-X Turbo mode, which can be enabled from the drop-down menu bar by selecting "CPU" followed by "Turbo (Fast Forward)".
This turbo mode is not like the old Turbo button on retro PCs, but functions more like a fast-forward, and therefore should not be used when interacting with the guest OS.
The turbo mode is automatically disabled the moment a key is pressed, to prevent spurious keypresses to be registered causing undesirable effects.</p>
</li>
<li>
<p>Unless noted otherwise, Windows 3.1 drivers are not backward compatible with Windows 3.0.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_windows_3_0a_with_multimedia_extensions_specific_notes">Windows 3.0a with Multimedia Extensions specific notes</h3>
<div class="paragraph">
<p>Also called <strong>Windows 3.0 Multimedia Edition</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>This edition was available only to OEMs (Original Equipment Manufacturers) for bundling with a multimedia PC or multimedia upgrade set, as such Windows will be customized to that multimedia system or upgrade set.
Examples of such customization, are an OEM specific launcher, OEM specific applications, but also that the installer may default to custom audio and video options.</p>
</li>
<li>
<p>It seems all versions were distributed on CD, the installation can be started by going into the <code>MWIN</code> directory on the CD and running <code>SETUP.EXE</code>.</p>
</li>
<li>
<p>Unlike regular Windows which installs by default to <code>C:\WINDOWS</code> this edition installs by default to <code>C:\MWINDOWS</code>.</p>
</li>
<li>
<p>The two editions which have been archived, shipped with Multimedia upgrade kits, are from Tandy and Creative Labs respectively.</p>
</li>
<li>
<p>The Tandy edition shipped as part of a Sound and CD-ROM upgrade kit, included a "Tandy Sound Blaster Pro 16". Despite the name, this is not actually a SB16, but rather a modified SB Pro (aka SB Pro 1.0). Drivers for this are included with the Windows installation and you should emulate a SB Pro 1 for the best experience. The card by default was set to IO 220, IRQ 10 and DMA 3, and you should either use those settings in your DOSBox-X config file, or modify <code>C:\MWINDOWS\SYSTEM.INI</code> after installation.</p>
</li>
<li>
<p>The Creative Labs edition shipped as part of a Sound and CD-ROM upgrade kit, included a "Sound Blaster Pro" (aka SB Pro 1.0). Drivers for this are included with the Windows installation, and you should emulate an SB Pro 1 for the best experience.</p>
</li>
<li>
<p>During Windows setup, change the default "Palettized VGA 640x480 with 16 colors" display option to "VGA", or audio playback will cause Windows to crash. You can install the ET4000 drivers afterwards.</p>
</li>
<li>
<p>If during Windows setup you are asked to provide the path to "mouse.sys", skip it. It is looking for the Microsoft DOS Mouse driver, which is not needed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dosbox_x_config_file">DOSBox-X config file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is recommended that you create a custom DOSBox-X config file for running Windows 3.0</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="py">autolock</span><span class="p">=</span><span class="s">true</span>

<span class="nn">[dosbox]</span>
<span class="py">title</span><span class="p">=</span><span class="s">Windows 3.0</span>
<span class="py">memsize</span><span class="p">=</span><span class="s">16</span>
<span class="py">machine</span><span class="p">=</span><span class="s">svga_et4000</span>

<span class="nn">[dos]</span>
<span class="err">hard</span> <span class="err">drive</span> <span class="err">data</span> <span class="err">rate</span> <span class="py">limit</span><span class="p">=</span><span class="s">0</span>
<span class="err">floppy</span> <span class="err">drive</span> <span class="err">data</span> <span class="err">rate</span> <span class="py">limit</span><span class="p">=</span><span class="s">0</span>

<span class="nn">[cpu]</span>
<span class="py">cputype</span><span class="p">=</span><span class="s">pentium</span>
<span class="py">core</span><span class="p">=</span><span class="s">normal</span>

<span class="nn">[sblaster]</span>
<span class="py">sbtype</span><span class="p">=</span><span class="s">sbpro1</span>

<span class="nn">[pci]</span>
<span class="py">voodoo</span><span class="p">=</span><span class="s">false</span>

<span class="nn">[ide, primary]</span>
<span class="py">int13fakeio</span><span class="p">=</span><span class="s">true</span>
<span class="py">int13fakev86io</span><span class="p">=</span><span class="s">false</span>

<span class="nn">[render]</span>
<span class="py">scaler</span><span class="p">=</span><span class="s">none</span>

<span class="nn">[autoexec]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the above config and save it as <code>win30.conf</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preparing_for_installation">Preparing for installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Except for the Multimedia Edition, all Windows 3.0 versions were shipped on floppies, requiring anywhere between 5 and 15 disks, depending on media-type and Windows version.
And while it is possible to install Windows 3.0 from floppy images in DOSBox-X, the disk-swap process for this is rather tedious for substantial number of disks.
As such it is recommended to make a directory such as "INSTALL" and copy the contents of ALL the diskettes into this directory.
This way there is no need to swap disks during the installation process.</p>
</div>
<div class="sect2">
<h3 id="_example_of_extracting_files_from_disk_images">Example of extracting files from disk images</h3>
<div class="paragraph">
<p>There are several ways to extract the contents of disk images, such as 7zip on Windows or "Disk Image Mounter" on Linux.
In this example, DOSBox-X itself is used to mount a disk image, copy its contents into a folder, unmount the disk image and do the next.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">MOUNT C /home/myuser/winroot
C:
MD INSTALL
IMGMOUNT A DISK01.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK02.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK03.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK04.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A DISK05.IMG -U
COPY A:\*.* C:\INSTALL
IMGMOUNT A -U</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your new INSTALL directory now holds the contents of all 5 disks in this example.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_an_installation_cd_rom">Mounting an installation CD-ROM</h3>
<div class="paragraph">
<p>If you have a "Windows 3.0a Multimedia Edition" CD-ROM image, you can simply mount it in DOSBox-X, and run the SETUP program.
e.g.,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT D win30me.iso
D:
CD MWIN
SETUP.EXE</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The installer is normally found on the CD as <code>\MWIN\SETUP.EXE</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_in_a_mounted_folder">Installing in a mounted folder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a directory on your system that you&#8217;re going to use (mount) as your Windows 3.0 C: drive.
Valid examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For Windows hosts</p>
<div class="ulist">
<ul>
<li>
<p>C:\winroot</p>
</li>
<li>
<p>C:\users\myuser\win30</p>
</li>
</ul>
</div>
</li>
<li>
<p>For Linux hosts</p>
<div class="ulist">
<ul>
<li>
<p>/home/myuser/winroot</p>
</li>
<li>
<p>/home/myuser/windows/win30</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For users running Windows natively on their computer, do <strong>NOT</strong> mount the root of your C: drive as the DOSBox C: drive! (e.g., <code>MOUNT C: C:\</code> should NOT be done), as it will cause confusion and potential conflicts between the host system C:\WINDOWS directory and that of Windows 3.0.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now create a directory underneath that, which will hold your Windows 3.0 installation files.
e.g., <code>C:\users\myuser\win30\INSTALL</code> or <code>/home/myuser/winroot/INSTALL</code> and copy the installation files into it.</p>
</div>
<div class="paragraph">
<p>You are now ready to start DOSBox-X from the command-line, using the newly created <code>win30.conf</code>.
This assumes that the <code>dosbox-x</code> program is in your path and <code>win30.conf</code> is in your current directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win30.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You now need to mount your new folder as the C: drive in DOSBox-X and start the installation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">MOUNT C /home/myuser/winroot
C:
CD INSTALL
SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust the path for mounting the C: drive as needed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If your path has spaces in it, you need to enclose it in quotes. e.g., <code>MOUNT C "C:\Users\John Doe\winroot"</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Windows installation will now take place.</p>
</div>
<div class="paragraph">
<p>Once the installation process has finished, you will be asked if you want to start windows or exit to DOS.
Exit to DOS and type EXIT to close DOSBox-X.</p>
</div>
<div class="paragraph">
<p>Now edit your <code>win30.conf</code> config file and add the following lines into the [autoexec] section at the end of the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">@ECHO OFF
MOUNT C /home/myuser/winroot
C:
IF EXIST C:<span class="se">\M</span>WINDOWS<span class="se">\W</span>IN.COM GOTO MWINDOWS
IF EXIST C:<span class="se">\W</span>INDOWS<span class="se">\W</span>IN.COM GOTO WINDOWS
ECHO No Windows installation found
GOTO END

:MWINDOWS
<span class="nb">echo </span>Starting Windows 3.0a with Multimedia Extensions
SET <span class="nv">PATH</span><span class="o">=</span>%PATH%<span class="p">;</span>C:<span class="se">\M</span>WINDOWS<span class="p">;</span>
SET <span class="nv">TEMP</span><span class="o">=</span>C:<span class="se">\M</span>WINDOWS<span class="se">\T</span>EMP
C:<span class="se">\M</span>WINDOWS<span class="se">\W</span>IN.COM
GOTO END

:WINDOWS
<span class="nb">echo </span>Starting Windows 3.0
SET <span class="nv">PATH</span><span class="o">=</span>%PATH%<span class="p">;</span>C:<span class="se">\W</span>INDOWS<span class="p">;</span>
SET <span class="nv">TEMP</span><span class="o">=</span>C:<span class="se">\W</span>INDOWS<span class="se">\T</span>EMP
C:<span class="se">\W</span>INDOWS<span class="se">\W</span>IN.COM
GOTO END

:END
EXIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust the <code>MOUNT</code> path above for mounting the C: drive as needed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_booting_from_a_dos_hdd_image">Booting from a DOS HDD image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This method brings with it a bit of added inconvenience.
For instance, you will need to do your own DOS memory management and load DOS drivers for CD-ROM access.
You can also not boot DOSBox-X from a mounted host directory (folder mount).</p>
</div>
<div class="sect2">
<h3 id="_host_folder_mounts">Host Folder mounts</h3>
<div class="paragraph">
<p>Starting with DOSBox-X 2022.08.0, there is optional support to dynamically convert a host folder mount to an emulated FAT harddisk for use when you need to boot a guest OS, such as MS-DOS.
This can be accomplished in one of two ways. Either when you issue the <code>boot</code> command, you add the option <code>-convertfat</code>. e.g. <code>boot c: -convertfat</code>.</p>
</div>
<div class="paragraph">
<p>Or by setting the following option in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="py">convertdrivefat</span> <span class="p">=</span> <span class="s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When you now boot from a real image file, it will attempt to convert <strong>ALL</strong> folder mounts at the time of booting to emulated FAT Harddisks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You cannot boot from such an emulated FAT harddisk. You will still need some other bootable image file to actually boot a guest OS.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This conversion is dynamic, effectively creating an emulated FAT harddisk out of a folder mount.
This converted FAT harddisk is not automatically stored permanently.
You can however, store it as a permanent image file that you can later mount with <code>IMGMOUNT</code>, using the "Drive" &gt; "drive letter" &gt; "Save to disk image" option from the menus.
Please see the "Creating harddisk images from folder mounts" section in the <a href="Guide%3AManaging-image-files-in-DOSBox‐X#Creating_harddisk_images_from_folder_mounts">Guide: Managing image files in DOSBox-X</a> for more information.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There is currently no support for creating emulated CD-ROM or Floppy drives out of folder mounts with this method. Any CD-ROM or Floppy folder mounts will also be converted to harddisk folder mounts, and may not actually work for the intended purpose.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One thing to note, is that there is no way to specify the FAT type to use for the conversion.
The FAT type will be automatically selected based on the aggregate size of files in the folder, plus 250MiB (this can be adjusted with the <code>convert fat free space</code> option in the DOSBox-X config file).
If the total space of files + 250MiB does not exceed 2GiB, it will convert it into a FAT16 disk. Otherwise, it will become a FAT32, which in turn will require a guest OS with FAT32 support.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can also make the emulated FAT drive read-only by using the <code>-convertfatro</code> option with the <code>boot</code> command. Or by setting <code>convert fat free space=0</code> option in the DOSBox-X config file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_windows_3_0_into_a_dos_hdd_image">Installing Windows 3.0 into a DOS HDD image</h3>
<div class="paragraph">
<p>The first step is to create a DOS HDD image, for which you can follow the <a href="Guide%3ADOS-Installation-in-DOSBox‐X">PC DOS and MS-DOS Installation Guide</a>.
You need at least DOS 3.1 for Windows 3.0.
However, it is recommended to use a newer version such as DOS 6.x</p>
</div>
<div class="paragraph">
<p>Once you have a DOS HDD image, temporarily mount it in DOSBox-X to transfer your INSTALL folder into your DOS HDD image, together with any drivers and add-ons you might need (preferably already unzipped, such that you don&#8217;t need to do that in DOS or Windows 3.0, as they lack support for that by default).</p>
</div>
<div class="paragraph">
<p>Something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
MOUNT D .
XCOPY D:\INSTALL C:\INSTALL /I /S
XCOPY D:\DRIVERS C:\DRIVERS /I /S
XCOPY D:\ADDONS C:\ADDONS /I /S
EXIT</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adjust paths in the above example as needed.</p>
</div>
<div class="paragraph">
<p>Now edit your <code>win30.conf</code> config file and in the <code>[autoexec]</code> section at the end, add the following lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
BOOT C:</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now start DOSBox-X with your <code>win30.conf</code> config file from the command-line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win30.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It should boot to the C: prompt, and you can start the installation process.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">CD INSTALL
SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After the installation is finished, you can install your drivers and add-ons.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_windows_3_0_after_installation">Starting Windows 3.0 after installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the installation is finished, you can start Windows 3.0 from the command-prompt with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">dosbox-x -conf win30.conf</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can optionally create a shortcut on your desktop to start Windows 3.0 directly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_to_take_after_installation">Steps to take after installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once Windows 3.0 is installed, here is some additional software you may want to install or update:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Updated Video drivers</p>
</li>
<li>
<p>Adobe Type Manager 2.5</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_video_driver">Video driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="Guide%3AVideo-card-support-in-DOSBox‐X">Video card support in DOSBox‐X</a> for more information about the various video cards, and available options.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
For Windows 3.0 the recommended display adapter is the Tseng Labs ET4000.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here are the recommended drivers, depending on the video adapter you are emulating.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Tseng Labs</strong></p>
<div class="ulist">
<ul>
<li>
<p>ET3000 using <code>machine=svga_et3000</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="http://files.mpoli.fi/hardware/DISPLAY/TSENG/ET3-W31.ZIP">Windows 3.0 and 3.1beta - ET3000 drivers, Jan 15 1992</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>ET4000 using <code>machine=svga_et4000</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=292&amp;menustate=0">Windows 3.0 - ET4000 drivers, Jan 15 1992</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Paradise Systems</strong></p>
<div class="ulist">
<ul>
<li>
<p>PVGA1A using <code>machine=svga_paradise</code></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://vogonsdrivers.com/getfile.php?fileid=243&amp;menustate=0">Windows 3.0 - PVGA drivers, Dec 19 1990</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mouse_support">Mouse support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When running Windows in DOSBox-X the integration is not seamless.
You need to capture the mouse and again release it when you want the mouse to leave the DOSBox-X window.
This is because Windows uses its own driver instead of using the integrated mouse support that DOSBox-X provides.</p>
</div>
<div class="paragraph">
<p>There are two possible solutions to this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dosbox_x_mouse_integration_driver">DOSBox-X mouse integration driver</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is experimental support in DOSBox-X for seamless integration.
To get this working take the following steps:</p>
</div>
<div class="paragraph">
<p>Go to <a href="https://github.com/joncampbell123/doslib/releases">doslib releases</a> and download the latest binary release of doslib.
Unpack the archive, and you will find a Windows 3.0 mouse driver in the <code>windrv/dosboxpi/bin/win30</code> directory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the <code>DBOXMPI.DRV</code> and <code>OEMSETUP.INF</code> files for your Windows version to a place where the Windows SETUP.EXE program will be able to find it</p>
</li>
<li>
<p>When you run SETUP.EXE, select to change the mouse and then select the "Other (requires disk provided by a hardware manufacturer)" option</p>
</li>
<li>
<p>Enter the path where you saved the <code>DBOXMPI.DRV</code> and <code>OEMSETUP.INF</code> files</p>
</li>
<li>
<p>Select the "DOSBox-X Mouse Pointer Integration" option</p>
</li>
<li>
<p>If SETUP asks for the "DOSBox-X Guest Additions" disk, give it the same path as before.</p>
</li>
<li>
<p>Continue the setup as normal</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, set the following options in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="err">mouse</span> <span class="py">emulation</span><span class="p">=</span><span class="s">integration</span>

<span class="nn">[cpu]</span>
<span class="err">integration</span> <span class="py">device</span><span class="p">=</span><span class="s">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now when you run Windows 3.0, you should have seamless mouse support.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
These old windows versions had no support for mice with scroll wheels. By default, DOSBox-X will simulate cursor up/down keypresses when you use the scroll wheel.
This can be controlled by the <code>mouse_wheel_key=</code> setting in the <code>[sdl]</code> section of your DOSBox-X config file.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_vmware_mouse_driver">VMWare mouse driver</h3>
<div class="paragraph">
<p>DOSBox-X also supports the VMware mouse protocol.
There is a 3rd party Windows 3.0 mouse driver <a href="https://git.javispedro.com/cgit/vbados.git/about/">VBMOUSE.DRV</a> by @javispedro, including support for the scroll wheel.</p>
</div>
<div class="paragraph">
<p>If you are running Windows 3.0 directly in the DOSBox-X integrated DOS environment, do not load the VBMOUSE.EXE driver. Only install the VBMOUSE.DRV in Windows 3.0.</p>
</div>
<div class="paragraph">
<p>For scroll wheel support, you will also have to set the following setting in your DOSBox-X config file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[sdl]
mouse_wheel_key=0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sound">Sound</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Windows 3.0 and 3.0a does not really support sound.
It only supports the PC Speaker, and even then is limited to a simple "beep" sound.</p>
</div>
<div class="paragraph">
<p>Some early Windows games will directly access the PC Speaker, without a driver, to get more complex sounds.</p>
</div>
<div class="paragraph">
<p>In addition, it is possible to install early versions of Sound Blaster software for Windows, which provides its own API, to allow the included Jukebox and Mixer to access the hardware.</p>
</div>
<div class="paragraph">
<p><a href="http://files.mpoli.fi/hardware/SOUND/CLABS/WIN30.ZIP">SB 1.0/1.5/2.0 and SB Pro 1.0 drivers for Windows 3.0</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multimedia_edition_sound">Multimedia Edition Sound</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As mentioned, this Windows edition was only available as part of a Multimedia PC purchase, or Multimedia upgrade kit.</p>
</div>
<div class="paragraph">
<p>Very few Windows games support this edition.
Look for a combination of Windows 3.0 and the "Multimedia Windows" or "Windows MPC" logo on the box.
A few known titles to support it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Early Sierra Online Windows versions such as: Mixed Up Mother Goose, King&#8217;s Quest V, Space Quest IV, Laura Bow 2, King&#8217;s Quest VI, Freddy Pharkas, EcoQuest 1</p>
</li>
<li>
<p>Battle Chess Enhanced CD-ROM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The only available sound drivers, are the once included with the installation. Later Windows 3.1 sound drivers will not work.</p>
</div>
<div class="paragraph">
<p>There are two editions for which information is available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tandy Multimedia upgrade kit with "Tandy Sound Blaster Pro 16", which is actually a modified SB Pro 1.0</p>
</li>
<li>
<p>Creative Labs Multimedia upgrade kit with SB Pro 1.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For both of these editions, it is best to use <code>sbtype=sbpro1</code> in your DOSBox-X config file.</p>
</div>
<div class="paragraph">
<p>During Windows installation, the Tandy edition will only offer the option to change the base IO port from the default 220.
Options to change the IRQ and DMA are not given. For this edition, you should either set <code>irq=10</code> and <code>dma=3</code> in your DOSBox-X config file, or modify the defaults manually after installation in <code>C:\MWINDOWS\SYSTEM.INI</code></p>
</div>
<div class="paragraph">
<p>For the Creative Labs edition, it will ask for the base IO port, IRQ and DMA during installation.
Unless you changed the settings in your DOSBox-X config file, the default is IO 220, IRQ 7 and DMA 1.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Setting the wrong SB settings can cause Windows to crash when it tries to play sounds, which it will do by default on Windows startup.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_enabling_external_midi_in_windows_3_0_multimedia_edition">Enabling external MIDI in Windows 3.0 Multimedia Edition</h3>
<div class="paragraph">
<p>By default, the SBPro Windows drivers will emulate MIDI playback using the dual OPL2 chips.</p>
</div>
<div class="paragraph">
<p>However, DOSBox-X has built-in support for General MIDI emulation (which is normally enabled by default), and which sounds much better.</p>
</div>
<div class="paragraph">
<p>To set it up, in Windows 3.0 Multimedia Edition, go to "Control Panel" and open "MIDI Mapper".</p>
</div>
<div class="paragraph">
<p>In the "MIDI Mapper" dialogue box click on the "New&#8230;&#8203;" button.
You will be asked for a name and description.
You can name it anything you like, for instance "SBPro Ext MIDI", and click the "OK" button.
You do not have to enter anything for the Description.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.0_MIDI_1.png" alt="Windows 3.0a MIDI">
</div>
</div>
<div class="paragraph">
<p>You will then get a "MIDI Setup" window.
The only thing you want to change here is the "Port Name" to "SB MIDI Out" for all 16 lines.
You may also notice that for each line the active checkbox gets checked, this is correct.
Once finished click the "OK" button and confirm the save.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.0_MIDI_2.png" alt="Windows 3.0a MIDI">
</div>
</div>
<div class="paragraph">
<p>You should now be able to open the Windows 3.0 Media Player and playback something like <code>C:\MWINDOWS\MMDATA\CANYON.MID</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enabling_printing">Enabling printing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Also see the <a href="Guide%3ASetting-up-printing-in-DOSBox%E2%80%90X">Guide: Setting up printing in DOSBox-X</a></p>
</div>
<div class="sect2">
<h3 id="_print_to_postscript">Print to PostScript</h3>
<div class="paragraph">
<p>For the best print quality, you will want to print to a PostScript printer in Windows 3.0.</p>
</div>
<div class="paragraph">
<p>First, set up your DOSBox-X config to print to a file as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[dosbox]</span>
<span class="py">captures</span><span class="p">=</span><span class="s">capture</span>

<span class="nn">[parallel]</span>
<span class="py">parallel1</span><span class="p">=</span><span class="s">file timeout=2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next in Windows 3.0, select any PostScript printer such as the "QMS ColorScript 100", during printer setup connected to LPT1.</p>
</div>
<div class="paragraph">
<p>When you print, a .prt file in your <code>captures=</code> directory will be created, which despite the extension, is actually a PostScript file.</p>
</div>
<div class="paragraph">
<p>On Linux and macOS, PostScript files are natively supported and can be viewed and printed.
On a Windows host, it is necessary to install a separate PostScript viewer such as <a href="https://pages.cs.wisc.edu/~ghost/">GSview</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_epson_emulation">Epson emulation</h3>
<div class="paragraph">
<p>As an alternative, you can use the integrated Epson printer emulation, but the output quality will be significantly less compared to PostScript.</p>
</div>
<div class="paragraph">
<p>First, set up your DOSBox-X config to emulate an Epson printer as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[parallel]</span>
<span class="py">parallel1</span><span class="p">=</span><span class="s">printer</span>

<span class="nn">[printer]</span>
<span class="py">printer</span><span class="p">=</span><span class="s">true</span>
<span class="py">printoutput</span><span class="p">=</span><span class="s">ps</span>
<span class="py">multipage</span><span class="p">=</span><span class="s">true</span>
<span class="py">timeout</span><span class="p">=</span><span class="s">2000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next in Windows 3.0, select the "Epson LQ-850/950/1050" option, connected to LPT1.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Make sure that you do not configure the Epson printer driver for a graphics resolution other than 180x180, or the output will be corrupted.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Windows:Windows_3.0_EPSON_SETUP.png" alt="Windows 3.0 Epson setup">
</div>
</div>
<div class="paragraph">
<p>When you print, a PostScript file with the .ps extension will be created in your current working directory.
The emulated Epson printer settings can be adjusted as documented on the above linked wiki printing guide.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_starting_a_windows_game_from_dos">Starting a Windows game from DOS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to silently start a Windows game, without seeing the Windows 3.0 splash screen or program manager, and when you exit the game that it exits Windows, here are the steps to take:</p>
</div>
<div class="paragraph">
<p>First install the game normally in Windows.</p>
</div>
<div class="paragraph">
<p>You can then start the game from DOS simply by appending the Windows game executable behind the WIN.COM executable as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">WIN \path\to\game.exe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will prevent the Windows splash screen being shown and will directly start the game without first going to the Program Manager (progman).</p>
</div>
<div class="paragraph">
<p>The second step you may want to take, is that when you exit the game, you also exit Windows 3.0. For this you need a 3rd party utility called "<a href="https://www.shdon.com/software/tools">RUNEXIT.EXE</a>", and place it in your PATH. Now simply start the game as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">WIN RUNEXIT \path\to\game.exe</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Like before it will start the game without the Windows splash screen, but now when you Exit the game it will also Exit Windows.
This way you can launch Windows games from a DOS batch file, or from a DOSBox launcher such as <a href="https://dbgl.org/">DBGL</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_limitations">Known limitations</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>When booting a guest OS, such an MS-DOS with Windows 3.0 in DOSBox-X, so-called folder mounts are only partly supported.
Only harddisk folder mounts will be available to the guest OS, and this excludes the boot drive as DOSBox-X cannot boot from a folder mount.</p>
</li>
<li>
<p>If you intend at any point to use a diskette during your usage of Windows 3.0, you must mount a diskette image <strong>before</strong> starting Windows 3.0.
You can change the diskette, once you started Windows 3.0 from the DOSBox-X menus.
But if a diskette drive is not present when starting Windows 3.0, and you attach it afterwards, it will not work properly, and you get strange errors.</p>
</li>
<li>
<p>If you intend at any point to use a CD during your usage of Windows 3.0, you must mount a CD image <strong>before</strong> starting Windows 3.0.
You can change the CD, once you started Windows 3.0 from the DOSBox-X menus.
But if a CD-ROM drive is not present when starting Windows 3.0 the drive is simply missing, and you cannot add it without quitting and restarting Windows 3.0.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>
