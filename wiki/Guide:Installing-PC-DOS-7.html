<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Installing PC DOS 7 or PC DOS 2000 in DOSBox-X</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>Back to the <a href="Guide%3ADOS-Installation-in-DOSBox‐X">PC DOS and MS-DOS Installation Guide</a></p>
</div>
<div class="sect1">
<h2 id="_installing_pc_dos_7_or_pc_dos_2000_in_dosbox_x">Installing PC DOS 7 or PC DOS 2000 in DOSBox-X</h2>
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_installing_pc_dos_7_or_pc_dos_2000_in_dosbox_x">Installing PC DOS 7 or PC DOS 2000 in DOSBox-X</a></li>
<li><a href="#_overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#_editions_this_applies_to">Editions this applies to</a></li>
<li><a href="#_notes">Notes</a></li>
</ul>
</li>
<li><a href="#_creating_a_pc_dos_7_hdd_image">Creating a PC DOS 7 HDD image</a></li>
<li><a href="#_creating_a_pc_dos_2000_hdd_image_from_cd_rom">Creating a PC DOS 2000 HDD image from CD-ROM</a></li>
<li><a href="#_creating_a_pc_dos_2000_hdd_image_from_diskettes">Creating a PC DOS 2000 HDD image from diskettes</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editions_this_applies_to">Editions this applies to</h3>
<div class="sect3">
<h4 id="_pc_dos_7_revision_0">PC DOS 7, revision 0</h4>
<div class="ulist">
<ul>
<li>
<p>First version to use XDF disks</p>
</li>
<li>
<p>Adds a command-line calculator</p>
</li>
<li>
<p>Adds ability to load device drivers from command line</p>
</li>
<li>
<p>Adds REXX language support</p>
</li>
<li>
<p>Stacker disk compression replaces Addstor SuperStor</p>
</li>
<li>
<p>Adds PenDOS</p>
</li>
<li>
<p>Adds Phoenix PCMCIA support</p>
</li>
<li>
<p>Adds HELP file viewer (OS/2 INF format)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pc_dos_2000_aka_pc_dos_7_0_revision_1">PC DOS 2000 (aka PC DOS 7.0, revision 1)</h4>
<div class="ulist">
<ul>
<li>
<p>The only PC DOS release to be available on CD-ROM</p>
</li>
<li>
<p>Minor Y2K fixes</p>
</li>
<li>
<p>Adds Euro currency symbol support</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_notes">Notes</h3>
<div class="ulist">
<ul>
<li>
<p>There is also PC DOS 7.1 which has LBA and FAT32 support, but it only contains kernel files, and it does not have an installation program.</p>
</li>
<li>
<p>Some disk versions of IBM PC DOS 7 and 2000 were distributed in IBM XDF format or IBM DSKF image format.</p>
<div class="ulist">
<ul>
<li>
<p>XDF image files are easy to recognise as they use the .XDF extension. DOSBox-X supports mounting these images directly.
Original disks in XDF format cannot be read on a modern PC with a USB diskette drive.</p>
</li>
<li>
<p>DSKF image files can be trickier to recognise as they use the same .DSK extension as is sometimes used for regular MFM disk images.
While DOSBox-X will fail to <code>IMGMOUNT</code> a DSKF image, it will happily try to <code>BOOT</code> a DSKF disk image and fail.
On Linux you can run the command <code>file filename.dsk</code>, and if it returns <code>floppy image data (IBM SaveDskF)</code>, it is a DSKF disk image.
Another way is to check the size of the .DSK file.
If it is exactly 1474560, 1228800, 737280 or 368640 bytes, it is likely to be a regular MFM disk image (in respectively 1.44MB, 1.2MB, 720KB or 360KB sizes).
The size of a DSKF disk image will instead vary.
IBM DSKF image files can be converted in DOSBox-X to regular diskette images with <a href="https://ftpmirror.your.org/pub/misc/ftp.software.ibm.com/storage/adsm/tools/loaddskf/loaddskf.exe">LOADDSKF.EXE</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The PC DOS 2000 CD-ROM release is a bit of an odd release.
One may expect that the CD-ROM is bootable, or that there is a DOS boot diskette provided with CD-ROM drivers.
But neither is the case. Officially you could install it in one of two ways:</p>
<div class="ulist">
<ul>
<li>
<p>If you already have some version of DOS installed with CD-ROM support, and want to upgrade, you can directly run SETUP.EXE from the CD-ROM to install onto your system.</p>
</li>
<li>
<p>If you want to do a clean install, the CD-ROM contains six 3.5" 1.44MB disk images in IBM DSKF format together with LOADDSKF.EXE to write them to diskettes.
You can then boot from the diskettes to install PC DOS 2000.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_pc_dos_7_hdd_image">Creating a PC DOS 7 HDD image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first PC DOS 7.0, revision 0 diskette is a regular 1.44MB bootable disk image, the other disks are in XDF format.
Both types can be mounted in DOSBox-X, and therefor the installation is similar to PC DOS 6.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the first disk image is in IBM DSKF format, it first needs to be converted to a regular MFM disk image using <code><a href="https://ftpmirror.your.org/pub/misc/ftp.software.ibm.com/storage/adsm/tools/loaddskf/loaddskf.exe">LOADDSKF.EXE</a></code> or you will not be able to boot from it.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In addition to the below DOSBox-X command line utility, it is possible to create harddisk images from the DOSBox-X menu.
Go to the "DOS" menu, and select "Create blank disk image…​".
This option allows for various common harddisk types to be created, for less common types you need to use the command line utility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Assuming your PC DOS 7.0 disk images are in the current working directory, and named as shown below, type the following commands at the DOSBox-X <code>Z:\&gt;</code> prompt.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go"> IMGMAKE hdd.img -t hd -size 2048
 IMGMOUNT C hdd.img
 BOOT DISK1.IMG DISK2.XDF DISK3.XDF DISK4.XDF DISK5.XDF</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When prompted to change disk, on the DOSBox-X menu bar select "DOS" followed by "Swap disk". After the installation is finished, from the DOSBox-X menu bar select "Main" followed by "Reset guest system", and you will be back at the DOSBox-X <code>Z:\&gt;</code> prompt.</p>
</div>
<div class="paragraph">
<p>You can now boot these DOS versions directly from the HDD image as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
BOOT C:</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_pc_dos_2000_hdd_image_from_cd_rom">Creating a PC DOS 2000 HDD image from CD-ROM</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In addition to the below DOSBox-X command line utility, it is possible to create harddisk images from the DOSBox-X menu.
Go to the "DOS" menu, and select "Create blank disk image…​".
This option allows for various common harddisk types to be created, for less common types you need to use the command line utility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You have the following installation options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use LOADDSKF.EXE to convert the IBM DSKF image files to regular MFM DSK files, and boot them in DOSBox-X.</p>
</li>
<li>
<p>Run the SETUP program on the CD image directly from the DOSBox-X integrated DOS. This is the method we will use below.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go"> IMGMAKE hdd.img -t hd -size 2048
 IMGMOUNT C hdd.img
 IMGMOUNT D PC-DOS_2000.iso
 D:
 SETUP</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>After it finished the installation, it will reboot DOSBox-X, and you&#8217;re again at the <code>Z:\&gt;</code> prompt. Now type the following to boot PC DOS 2000 normally.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
BOOT C:</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_pc_dos_2000_hdd_image_from_diskettes">Creating a PC DOS 2000 HDD image from diskettes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have the PC DOS 2000 disk images in DSKF format, you first need to convert them, one by one, with LOADDSKF.EXE in DOSBox-X as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE DISK1.IMG -t fd_1440
IMGMOUNT A DISK1.IMG -U
LOADDSKF PCDOS_1.DSK A:
IMGMAKE DISK2.IMG -t fd_1440
IMGMOUNT A DISK2.IMG -U
LOADDSKF PCDOS_2.DSK A:
IMGMAKE DISK3.IMG -t fd_1440
IMGMOUNT A DISK3.IMG -U
LOADDSKF PCDOS_3.DSK A:
IMGMAKE DISK4.IMG -t fd_1440
IMGMOUNT A DISK4.IMG -U
LOADDSKF PCDOS_4.DSK A:
IMGMAKE DISK5.IMG -t fd_1440
IMGMOUNT A DISK5.IMG -U
LOADDSKF PCDOS_5.DSK A:
IMGMAKE DISK6.IMG -t fd_1440
IMGMOUNT A DISK6.IMG -U
LOADDSKF PCDOS_6.DSK A:
IMGMOUNT A -U</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This assumes that you have mounted the directory in DOSBox-X which contains the DSKF image files and LOADDSKF.EXE.</p>
</div>
<div class="paragraph">
<p>Once you have the PC DOS 2000 disk images in non-DSKF format, you can install them as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go"> IMGMAKE hdd.img -t hd -size 2048
 IMGMOUNT C hdd.img
 BOOT DISK1.IMG DISK2.IMG DISK3.IMG DISK4.IMG DISK5.IMG DISK6.IMG</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When prompted to change disk, on the DOSBox-X menu bar select "DOS" followed by "Swap disk". After the installation is finished, from the DOSBox-X menu bar select "Main" followed by "Reset guest system", and you will be back at the DOSBox-X <code>Z:\&gt;</code> prompt.</p>
</div>
<div class="paragraph">
<p>You can now boot these DOS versions directly from the HDD image as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT 0 empty -fs none -t floppy
IMGMOUNT C hdd.img -ide 1m
IMGMOUNT D empty -t iso -ide 2m
BOOT C:</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>